import{_ as y,k as b,l as _,c as d,a,m as U,n as s,v as n,F as E,r as h,t as p,o as c,p as V}from"./index-B3_mxXM2.js";import{e as q}from"./events-CQkedNkd.js";const w={class:"page-container"},C={class:"page-overlay-content"},F={class:"container"},x={class:"form-container"},k={class:"form-row"},M={class:"category-options"},A=["value","onUpdate:modelValue"],D=["disabled"],R={__name:"ManageEvents",setup(j){const e=b({name:"",city:"",description:"",date:"",time:"",category:"",image:""}),u=["Concerts","Exposicions","Festivals","Teatre","Gastronomia","Fires","Cinema","Festes populars"],i=_(!1);async function m(){i.value=!0;const r=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e.city)}&format=json&limit=1`,t=await(await fetch(r,{headers:{"User-Agent":"RoadCultureApp/1.0"}})).json();if(t.length===0){alert("No s'ha trobat la localització. Comprova el nom de la ciutat."),i.value=!1;return}const l=parseFloat(t[0].lat),v=parseFloat(t[0].lon),g={id:Date.now(),name:e.name,city:e.city,description:e.description,date:e.date,time:e.time,category:e.category,image:e.image,coords:[l,v]};q.add(g),Object.keys(e).forEach(f=>e[f]=""),i.value=!1,alert("Esdeveniment afegit correctament!")}return(r,o)=>(c(),d("div",w,[a("div",C,[a("div",F,[o[6]||(o[6]=a("h3",{class:"manage-title"},"Crear Esdeveniment",-1)),a("div",x,[a("form",{onSubmit:U(m,["prevent"]),class:"form"},[s(a("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>e.name=t),class:"input",placeholder:"Nom de l'esdeveniment",required:""},null,512),[[n,e.name]]),s(a("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>e.city=t),class:"input",placeholder:"Ciutat o Població",required:""},null,512),[[n,e.city]]),s(a("textarea",{"onUpdate:modelValue":o[2]||(o[2]=t=>e.description=t),class:"input",placeholder:"Descripció",required:""},null,512),[[n,e.description]]),a("div",k,[s(a("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>e.date=t),type:"date",class:"input",required:""},null,512),[[n,e.date]]),s(a("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>e.time=t),type:"time",class:"input",required:""},null,512),[[n,e.time]])]),a("div",M,[(c(),d(E,null,h(u,t=>a("label",{key:t,class:"category-option"},[s(a("input",{type:"radio",name:"category",value:t,"onUpdate:modelValue":l=>e.category=l,required:""},null,8,A),[[V,e.category]]),a("span",null,p(t),1)])),64))]),s(a("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>e.image=t),class:"input",placeholder:"URL d'imatge",type:"url",required:""},null,512),[[n,e.image]]),a("button",{type:"submit",class:"btn btn-primary btn-full router-button btn-submit",disabled:i.value},p(i.value?"Afegint...":"Afegir"),9,D)],32)])])])]))}},S=y(R,[["__scopeId","data-v-c782b9aa"]]);export{S as default};
